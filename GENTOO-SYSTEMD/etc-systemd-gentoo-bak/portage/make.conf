# These settings were set by the catalyst build script that automatically
# built this stage.
# Please consult /usr/share/portage/config/make.conf.example for a more
# detailed example.

# NOTE: This stage was built with the bindist Use flag enabled
PORTDIR="/var/db/repos/gentoo"
DISTDIR="/var/db/repos/gentoo/distfiles"
PKGDIR="/var/db/repos/gentoo/packages"

# This sets the language of build output to English.
# Please keep this setting intact when reporting bugs.
LC_MESSAGES=C

#############COMMON BUILD>>>>>> JAVASHIN-X GENTOO TESTING
CARCH="x86_64"
CHOST="x86_64-pc-linux-gnu"

#CFLAGS="-march=haswell -O2 -pipe"    ####webkit without lto-overlay bashrc
#CXXFLAGS="${CFLAGS}"

#GENTOO/LINUX TESTING
ACCEPT_KEYWORDS="~amd64"

#LTO
#NOLDADD=1
#NTHREADS="3"
#source /etc/portage/make.conf.lto
#source /etc/portage/make.conf.lto.defines

#COMMONFLAGS
#CFLAGS="${CFLAGS} -march=native -mfpmath=sse+387 -falign-functions=32 -flimit-function-alignment \
#-fno-plt -fno-math-errno -fno-trapping-math -fno-stack-protector -pipe"

CFLAGS="-O3 -march=native -mtune=native -fno-stack-protector -mfpmath=sse+387  \
-fno-plt -fno-math-errno -fno-trapping-math -fipa-pta -fdevirtualize-at-ltrans -fno-semantic-interposition \
-falign-functions=32 -flimit-function-alignment -pipe"
CXXFLAGS="${CFLAGS}"
FCFLAGS="${CFLAGS}"
FFLAGS="${CFLAGS}"
CPPFLAGS="${CFLAGS}"
LDFLAGS="-Wl,-O2 -Wl,--as-needed,-z,now -Wl,--hash-style=gnu"
#LDFLAGS="${LDFLAGS} -Wl,--hash-style=gnu"
RUSTFLAGS="-C target-cpu=native -C opt-level=3"

CPU_FLAGS_X86="aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3"
MAKEOPTS="-j3"
#PORTAGE_NICENESS=19
ACCEPT_LICENSE="*"
VIDEO_CARDS="intel i965"
INPUT_DEVICES="libinput joystick"
LANG="en_US.UTF-8"
LINGUAS="en"
L10N="en en-US"
PYTHON_TARGETS="python2_7 python3_6 python3_7 python3_8"
PYTHON_SINGLE_TARGET="python3_8"
#ax_cv_c_float_words_bigendian=yes or ax_cv_c_float_words_bigendian=no no for x86 is little
#python 3.8
RUBY_TARGETS="ruby27"
CURL_SSL="nss"
#LUA_TARGETS="lua51"
#openssl"

QEMU_SOFTMMU_TARGETS="x86_64 aarch64 alpha arm cris hppa i386 lm32 m68k microblaze microblazeel \
mips mips64 mips64el mipsel moxie nios2 or1k ppc ppc64 s390x sh4 \
riscv32 riscv64 sh4eb sparc sparc64 tricore unicore32 xtensa xtensaeb"

QEMU_USER_TARGETS="aarch64 aarch64_be alpha arm armeb cris hppa i386 m68k microblaze \
microblazeel mips mips64 mips64el mipsel mipsn32 mipsn32el nios2 or1k ppc ppc64 \
ppc64abi32 ppc64le s390x sh4 sh4eb sparc sparc32plus sparc64  \
riscv32 riscv64 tilegx x86_64 xtensa xtensaeb"

### -riscv32 -riscv64

FEATURES="${FEATURES} buildpkg ccache"
CCACHE_DIR="/var/cache/ccache"

####USES

USE="-bindist raw jpeg2k X gtk mtp wayland wifi dbus f2fs reiserfs udf \
     xfs reiser4 hfs jfs ntfs xml zlib custom-cflags \
     custom-optimization modern-top lzma git lz4 lzo btrfs jpeg opengl fontconfig \
     branding portaudio wxwidgets dri3 sensors gstreamer udev \
     resolvconf kms libass libcaca libdrm apng postproc dav1d libkms \
     native-headset png nsplugin sensord spell exif xpresent fat \
     xmp 10bit -opencl threads http2 zstd jbig usb -cups alsa \
     pulseaudio vulkan xvmc xinerama python uxa network gif systray \
     curl -modemmanager sound cairo ffmpeg xpm mng webp libsamplerate \
     fdk ladspa openal openh264 opus svg cdda mod smpeg theora \
     truetype vorbis vpx wavpack x264 x265 xcb xvid vaapi drm dvd \
     lcms lua libcanberra plugin-checksum plugin-fishlim \
     plugin-sysinfo pango networkmanager -llvm startup-notification caja \
     magic tiff applet hddtemp libnotify lm_sensors fuse archive \
     image-converter cdr animation-rtl -video_cards_nouveau \
     -video_cards_amdgpu ogg -consolekit policykit -gallium aac lame adplug \
     cue mp3 http sndfile gbm flac modplug sdl sdl2 ffmpeg-codecs \
     infinality bs2b calf rubberband mda-lv2 lash upower udisks pgo \
     lto -xvfb jumbo-build rar ithreads -gdm egl gles gles1 gles2 \
     -plymouth systemd bluetooth colord v4l cgroup-hybrid gnuefi \
     vdpau libv4l -srt gtk3 openmp -ofono -ofono-headset -qt5 \
     gnome google cryptsetup lvm -dmraid mdadm device-mapper \
     lm-sensors realtime gamepad svg2 wpg icu vulkan-overlay \
     browser-extension libplacebo screencast gentoo-dev commercial synctex wired"


#DISPARATES/BULLSHIT/NON-SENSE
#-fuse-ld=bfd ${CFLAGS} -fno-plt -fno-math-errno -fno-trapping-math
#-fno-stack-protector -fomit-frame-pointer -fno-strict-aliasing
#-malign-data=cacheline
#-fbranch-target-load-optimize -ftracer
#-pthread -ftree-parallelize-loops=4 -floop-parallelize-all -fopenmp -fopenmp-simd -pipe"
###FLAGS="-march=native -mfpmath=sse+387 -falign-functions=32 -fgraphite-identity -floop-nest-optimize -fno-semantic-interposition -###fuse-####ld=bfd -O3 -fipa-pta -fno-plt -fno-math-errno -fno-trapping-math -fdevirtualize-at-ltrans -fno-stack-protector"
##NOTES################ not for perl = -ftree-parallelize-loops=4 -floop-parallelize-all
############################## openssl emerge out gentoo-lto alone
###############################
#-fvisibility-inlines-hidden

